<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="theme-color" content="#0a0f1a" />
    <meta
      name="description"
      content="A magical Christmas gift with our memories together"
    />
    <title>ğŸ„ Merry Christmas, My Love ğŸ’</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <!-- Start Experience Overlay - Click to start music -->
    <div id="start-overlay" class="start-overlay">
      <div class="start-content">
        <div class="start-snowflakes">
          <span>â„</span><span>â…</span><span>â†</span><span>â„</span><span>â…</span>
        </div>
        <div class="start-tree">ğŸ„</div>
        <h1 class="start-title">Merry Christmas</h1>
        <p class="start-subtitle">A Special Gift For You</p>
        <button id="start-btn" class="start-btn">
          <span class="btn-icon">ğŸµ</span>
          <span class="btn-text">Click to Begin</span>
        </button>
        <p class="start-hint">ğŸ”Š Best with sound on</p>
      </div>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-hidden">
      <div class="loading-content">
        <div class="loading-tree">ğŸ„</div>
        <h1 class="loading-title">Merry Christmas</h1>
        <p class="loading-subtitle">Preparing something special for you...</p>
        <div class="loading-bar">
          <div class="loading-progress"></div>
        </div>
      </div>
      <div class="snowflakes" aria-hidden="true">
        <div class="snowflake">â„</div>
        <div class="snowflake">â…</div>
        <div class="snowflake">â†</div>
        <div class="snowflake">â„</div>
        <div class="snowflake">â…</div>
        <div class="snowflake">â†</div>
        <div class="snowflake">â„</div>
        <div class="snowflake">â…</div>
        <div class="snowflake">â†</div>
        <div class="snowflake">â„</div>
      </div>
    </div>

    <!-- 3D Scene Container -->
    <div id="scene-container"></div>

    <!-- Instruction Hint -->
    <div id="hint" class="hint">
      <span class="hint-icon">ğŸ–±ï¸</span>
      <span class="hint-text">Drag to rotate â€¢ Click the gift to open</span>
    </div>

    <!-- Reset Progress Button -->
    <button id="reset-progress-btn" class="reset-progress-btn" title="Báº¯t Ä‘áº§u láº¡i tá»« Ä‘áº§u">
      ğŸ”„
    </button>

    <!-- Title Overlay -->
    <div id="title-overlay" class="title-overlay">
      <h1>Merry Christmas</h1>
      <!-- <p>Click the gift under the tree ğŸ</p> -->
    </div>

    <!-- Memory Book Modal -->
    <div id="book-modal" class="book-modal hidden">
      <div class="book-backdrop"></div>
      <div class="book-container">
        <button class="close-book" id="close-book">âœ•</button>

        <div class="book">
          <div class="book-cover">
            <div class="cover-content">
              <div class="cover-decoration">â„ â… â†</div>
              <h2>Our Memories</h2>
              <div class="cover-heart">ğŸ’</div>
              <p>A journey through our love</p>
              <div class="cover-decoration">â† â… â„</div>
            </div>
          </div>

          <div class="book-pages" id="book-pages">
            <!-- Pages will be generated by JavaScript -->
          </div>
        </div>

        <div class="book-navigation">
          <button class="nav-btn prev-btn" id="prev-page">
            <span>â®</span> Previous
          </button>
          <div class="page-indicator" id="page-indicator">Page 1 of 5</div>
          <button class="nav-btn next-btn" id="next-page">
            Next <span>â¯</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Puzzle Modal -->
    <div id="puzzle-modal" class="puzzle-modal hidden">
      <div class="puzzle-backdrop"></div>
      <div class="puzzle-container">
        <button class="puzzle-close" id="puzzle-close">âœ•</button>

        <!-- Puzzle Header -->
        <div class="puzzle-header">
          <div class="puzzle-icon" id="puzzle-icon">ğŸ</div>
          <h2 class="puzzle-title" id="puzzle-title">
            Giáº£i Ä‘á»‘ Ä‘á»ƒ nháº­n máº£nh ghÃ©p!
          </h2>
        </div>

        <!-- Puzzle Content - Dynamic -->
        <div class="puzzle-content" id="puzzle-content">
          <!-- Puzzle 1: Date Question -->
          <div class="puzzle-game puzzle-date" id="puzzle-date">
            <p class="puzzle-question">
              ğŸ’• NgÃ y cáº£ hai chÃ­nh thá»©c yÃªu nhau lÃ  ngÃ y nÃ o?
            </p>
            <div class="puzzle-input-group">
              <input
                type="text"
                id="date-answer"
                class="puzzle-input"
                placeholder="DD/MM"
                maxlength="5"
              />
              <button class="puzzle-submit" id="date-submit">Tráº£ lá»i</button>
            </div>
            <p class="puzzle-hint">ğŸ’¡ Gá»£i Ã½: ThÃ¡ng 9...</p>
          </div>

          <!-- Puzzle 2: Word Scramble (ULTRA HARD) -->
          <div class="puzzle-game puzzle-scramble hidden" id="puzzle-scramble">
            <p class="puzzle-question">ğŸ”¤ GhÃ©p 2 tá»« Ä‘á»ƒ táº¡o cÃ¢u hoÃ n chá»‰nh!</p>
            <p class="puzzle-warning">
              âš ï¸ Cáº©n tháº­n: CÃ³ chá»¯ cÃ¡i giáº£! Chá»¯ sáº½ Ä‘áº£o vá»‹ trÃ­!
            </p>
            <div class="scramble-letters" id="scramble-letters"></div>
            <div class="scramble-answer" id="scramble-answer"></div>
            <div class="scramble-buttons">
              <button class="puzzle-submit" id="scramble-submit">
                Kiá»ƒm tra
              </button>
              <button class="puzzle-reset" id="scramble-reset">LÃ m láº¡i</button>
            </div>
          </div>

          <!-- Puzzle 3: Love Equation -->
          <div class="puzzle-game puzzle-equation hidden" id="puzzle-equation">
            <p class="puzzle-question">ğŸ’— HoÃ n thÃ nh phÆ°Æ¡ng trÃ¬nh tÃ¬nh yÃªu!</p>
            <div class="equation-container">
              <span class="equation-part">1ï¸âƒ£ + 1ï¸âƒ£ = </span>
              <div class="equation-choices" id="equation-choices">
                <button class="equation-choice" data-value="1">1ï¸âƒ£</button>
                <button class="equation-choice" data-value="2">2ï¸âƒ£</button>
                <button class="equation-choice" data-value="heart">â¤ï¸</button>
                <button class="equation-choice" data-value="11">1ï¸âƒ£1ï¸âƒ£</button>
              </div>
            </div>
            <p class="puzzle-hint">ğŸ’¡ Khi yÃªu, 1 + 1 = ?</p>
          </div>

          <!-- Puzzle 4: Memory Match -->
          <div class="puzzle-game puzzle-memory hidden" id="puzzle-memory">
            <p class="puzzle-question">ğŸ§  TÃ¬m 3 cáº·p biá»ƒu tÆ°á»£ng giá»‘ng nhau!</p>
            <div class="memory-grid" id="memory-grid"></div>
            <div class="memory-info">
              <span id="memory-moves">LÆ°á»£t: 0</span>
              <span id="memory-pairs">Cáº·p: 0/3</span>
            </div>
          </div>
        </div>

        <!-- Puzzle Result -->
        <div class="puzzle-result hidden" id="puzzle-result">
          <div class="result-icon">ğŸ‰</div>
          <h3>ChÃ­nh xÃ¡c!</h3>
          <p>Báº¡n Ä‘Ã£ nháº­n Ä‘Æ°á»£c má»™t máº£nh ghÃ©p!</p>
          <div class="piece-earned" id="piece-earned">ğŸ§©</div>
          <button class="puzzle-continue" id="puzzle-continue">Tiáº¿p tá»¥c</button>
        </div>

        <!-- Wrong Answer -->
        <div class="puzzle-wrong hidden" id="puzzle-wrong">
          <div class="wrong-icon">ğŸ˜…</div>
          <p>ChÆ°a Ä‘Ãºng rá»“i! Thá»­ láº¡i nhÃ©~</p>
          <button class="puzzle-retry" id="puzzle-retry">Thá»­ láº¡i</button>
        </div>
      </div>
    </div>

    <!-- Treasure Pieces Indicator -->
    <div class="treasure-indicator" id="treasure-indicator">
      <div class="treasure-title">ğŸ§© Máº£nh ghÃ©p</div>
      <div class="treasure-pieces">
        <div class="piece-slot" id="piece-1" data-collected="false">â“</div>
        <div class="piece-slot" id="piece-2" data-collected="false">â“</div>
        <div class="piece-slot" id="piece-3" data-collected="false">â“</div>
        <div class="piece-slot" id="piece-4" data-collected="false">â“</div>
      </div>
      <div class="treasure-status" id="treasure-status">
        Thu tháº­p 4 máº£nh Ä‘á»ƒ má»Ÿ quÃ !
      </div>
    </div>

    <!-- Unlock Modal - Shows when clicking main gift -->
    <div id="unlock-modal" class="unlock-modal hidden">
      <div class="unlock-backdrop"></div>
      <div class="unlock-container">
        <button class="unlock-close" id="unlock-close">âœ•</button>

        <div class="unlock-header">
          <div class="unlock-gift-icon">ğŸ</div>
          <h2>Má»Ÿ Kho BÃ¡u</h2>
          <p>Äáº·t 4 máº£nh ghÃ©p Ä‘á»ƒ má»Ÿ quÃ !</p>
        </div>

        <div class="unlock-pieces-grid">
          <div
            class="unlock-piece-slot"
            id="unlock-piece-1"
            data-collected="false"
          >
            â“
          </div>
          <div
            class="unlock-piece-slot"
            id="unlock-piece-2"
            data-collected="false"
          >
            â“
          </div>
          <div
            class="unlock-piece-slot"
            id="unlock-piece-3"
            data-collected="false"
          >
            â“
          </div>
          <div
            class="unlock-piece-slot"
            id="unlock-piece-4"
            data-collected="false"
          >
            â“
          </div>
        </div>

        <div class="unlock-status" id="unlock-status">
          Thu tháº­p 0/4 máº£nh Ä‘á»ƒ má»Ÿ khÃ³a
        </div>

        <button class="unlock-btn" id="unlock-btn" disabled>
          <span class="lock-icon">ğŸ”’</span>
          <span class="unlock-text">Má»Ÿ Kho BÃ¡u</span>
        </button>

        <p class="unlock-hint">
          ğŸ’¡ Giáº£i Ä‘á»‘ tá»« cÃ¡c há»™p quÃ  mÃ u Ä‘á»ƒ nháº­n máº£nh ghÃ©p!
        </p>
      </div>
    </div>

    <!-- Christmas Background Music -->
    <audio id="christmas-music" loop preload="auto">
      <!-- Using a royalty-free Christmas music URL -->
      <source src="./assets/christmas-434436.mp3" type="audio/mpeg" />
    </audio>

    <!-- Audio Toggle (optional ambient music) -->
    <button
      id="audio-toggle"
      class="audio-toggle muted"
      title="Play Christmas Music"
    >
      <span class="audio-on">ğŸ”Š</span>
      <span class="audio-off">ğŸ”‡</span>
    </button>

    <!-- Three.js and Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="book.js"></script>
    <script src="main.js"></script>
  </body>
</html>
